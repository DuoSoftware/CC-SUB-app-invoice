<form id="invoiceForm" name="vm.editInvoiceForm" ng-submit="submit()" novalidate>
    <!--CREATE NEW INVOICE _ CARDED=================================================-->
    <md-card flex class="input-block-gen">
        <md-card-title>
            <div layout="row" layout-align="start center">
                <md-icon md-font-icon="icon-cog"></md-icon> <h3>General details</h3>
            </div>
        </md-card-title>
        <md-card-content>
            <div layout="row">
                <md-autocomplete flex="30"
                                 ng-required="true"
                                 md-select-on-match
                                 ng-keypress="enter($event)"
                                 ng-disabled="ctrl.isDisabled"
                                 md-input-name="acName"
                                 md-no-cache="ctrl.noCache"
                                 md-selected-item="vm.editInvoice.profile"
                                 md-search-text="ctrl.searchProfile"
                                 md-selected-item-change="GetAddr(vm.editInvoice.profile,0)"
                                 md-items="item in queryProfile(ctrl.searchProfile)"
                                 md-item-text="item.profilename"
                                 md-floating-label="Customer"
                                 md-min-length="" style="height: 55px;">
                    <md-not-found>No items.</md-not-found>
                    <md-item-template>
                        <span md-highlight-text="ctrl.searchText">{{item.profilename+" "+item.othername}}</span>
                    </md-item-template>
                </md-autocomplete>
                <span>{{vm.editInvoice.bill_addr}}</span>
            </div>

            <div layout="row">
                <md-input-container flex="30">
                    <label>Start Date</label>
                    <md-datepicker ng-model="vm.editInvoice.invoiceDate" md-placeholder="Start date" >
                    </md-datepicker>
                </md-input-container>
                <div flex="5"></div>
                <md-input-container flex="30">
                    <label>Due Date</label>
                    <md-datepicker ng-model="vm.editInvoice.dueDate" md-placeholder="Due date" >
                    </md-datepicker>
                </md-input-container>
            </div>

        </md-card-content>
    </md-card>
    <md-card flex class="input-block-gen">
        <md-card-title>
            <div layout="row" layout-align="start center">
                <md-icon md-font-icon="icon-credit-card-multiple"></md-icon> <h3>Billing details</h3>
            </div>
        </md-card-title>
        <md-card-content>
            <div class="prod-row-wrap">
                <div layout="row" ng-repeat="row in rows" class="highlight-blue solid p-5 add-item-row">
                    <md-autocomplete flex="30" required class="mb-0" layout="row" layout-align="start center"
                                     md-input-id="{{row.productId}}"
                                     ng-required="false"
                                     ng-keydown="toggleSearchMre(rows,$event,$index,vm.searchText[$index],'true')"
                                     md-select-on-match
                                     ng-keypress="enter($event)"
                                     ng-disabled="row.isAutoDisabled"
                                     md-input-name="productRowAuto"
                                     md-no-cache="vm.noCache"
                                     md-selected-item="row.product"
                                     md-selected-item-change="validateProduct(row.product,$index,row)"
                                     md-search-text="vm.searchText[$index]"
                                     md-floating-label="Product"
                                     md-items="prod in querySearch(vm.searchText[$index],$index)"
                                     md-item-text="prod.code">
                        <md-not-found>
                            <!--No items.-->
                            <!--<md-button ng-hide="$scope.searchMre"-->
                            <!--style="line-height: 20px;font-size: 12px"-->
                            <!--ng-click="getNextProducts(vm.searchText,rows,$parent.$index);" type="button">Search More-->
                            <!--</md-button>-->
                            <label ng-show="last">No items.</label>
                        </md-not-found>
                        <md-item-template>
                            <span md-highlight-text="vm.searchText">{{prod.code}}</span>
                        </md-item-template>
                        <div class="errors" ng-messages="vm.editInvoice.productRowAuto.$error">
                            <!--<div ng-message="required">Product is required</div>-->
                            <div ng-message="invalidInput" ng-if="!vm.editInvoice.productRowAuto.$error.required">Please select a valid product</div>
                        </div>
                    </md-autocomplete>
                    <div flex="5"></div>
                    <md-input-container class="mb-0" flex="30">
                        <label>Quantity</label>
                        <input name="InvoiceProdQty" id="{{row.qtyId}}" ng-required="true" ng-pattern="/^-?[0-9][^\.]*$/" type="number" min="1" ng-blur="calcQty(row,$index)" ng-model="row.qty">
                        <div ng-messages="vm.editInvoice.InvoiceProdQty.$error">
                            <div ng-message="pattern">Quantity of Unit is invalid</div>
                        </div>
                    </md-input-container>
                    <div flex="5"></div>
                    <div class="mb-0" flex="30" layout="row">
                        <div flex="5" layout="column" class="billingFrqCurrency" layout-align="center start">
                            {{0| isoCurrency: BaseCurrency:0}}
                        </div>
                        <md-input-container class="m-0" flex style="height: 60px;top: 17px;">
                            <label>Amount</label>
                            <input ng-disabled="vm.searchText[$index]=='' || row.product!=null" type="number" ng-model="row.rowAmtDisplay" class="text-right">
                        </md-input-container>
                    </div>
                    <!--<div flex="5"></div>-->
                    <!--<div flex="30" layout="column" layout-align="center start">-->
                    <!--<md-input-container fill-width class="mt-40" id="invProdQty7" ng-if="slab.autoTermination==false">-->
                    <!--<label>Additional charge per unit</label>-->
                    <!--<input type="number" ng-required="true" min="1" ng-model="slab.costPerUnitAdd">-->
                    <!--</md-input-container>-->
                    <!--<md-checkbox ng-model="slab.autoTermination" aria-label="Auto Terminate" class="md-primary dep-checkbox" ng-class="{'offset-top':!slab.autoTermination}">Auto terminate</md-checkbox>-->
                    <!--</div>-->
                    <div class="w-5"></div>
                    <div layout="column" layout-align="center center" class="v-rule-gray">
                        <md-button ng-click="removerow($index);" class="md-icon-button md-warn mr-12"><md-icon md-font-icon="icon-close-circle"></md-icon><md-tooltip>Remove row</md-tooltip> </md-button>
                    </div>
                </div>
                <!--<div layout-gt-sm="row" ng-repeat="row in rows" class="add-item-row">-->
                    <!--<div flex="30" class="rel">-->
                        <!--<md-autocomplete flex required-->
                                         <!--md-input-id="{{row.productId}}"-->
                                         <!--ng-required="true"-->
                                         <!--ng-keydown="toggleSearchMre(rows,$event,$index,vm.searchText[$index],'true')"-->
                                         <!--md-select-on-match-->
                                         <!--ng-keypress="enter($event)"-->
                                         <!--ng-disabled="row.isAutoDisabled"-->
                                         <!--md-input-name="productRowAuto"-->
                                         <!--md-no-cache="vm.noCache"-->
                                         <!--md-selected-item="row.product"-->
                                         <!--md-selected-item-change="validateProduct(row.product,$index,row)"-->
                                         <!--md-search-text="vm.searchText[$index]"-->
                                         <!--md-floating-label="Product"-->
                                         <!--md-items="prod in querySearch(vm.searchText[$index],$index)"-->
                                         <!--md-item-text="prod.code"-->
                                         <!--autocomplete-validator>-->
                            <!--<md-not-found>-->
                                <!--&lt;!&ndash;No items.&ndash;&gt;-->
                                <!--&lt;!&ndash;<md-button ng-hide="$scope.searchMre"&ndash;&gt;-->
                                <!--&lt;!&ndash;style="line-height: 20px;font-size: 12px"&ndash;&gt;-->
                                <!--&lt;!&ndash;ng-click="getNextProducts(vm.searchText,rows,$parent.$index);" type="button">Search More&ndash;&gt;-->
                                <!--&lt;!&ndash;</md-button>&ndash;&gt;-->
                                <!--<label ng-show="last">No items.</label>-->
                            <!--</md-not-found>-->
                            <!--<md-item-template>-->
                                <!--<span md-highlight-text="vm.searchText">{{prod.code}}</span>-->
                            <!--</md-item-template>-->
                            <!--<div class="errors" ng-messages="vm.editInvoice.productRowAuto.$error">-->
                                <!--&lt;!&ndash;<div ng-message="required">Product is required</div>&ndash;&gt;-->
                                <!--<div ng-message="invalidInput" ng-if="!vm.editInvoice.productRowAuto.$error.required">Please select a valid product</div>-->
                            <!--</div>-->
                        <!--</md-autocomplete>-->
                    <!--</div>-->
                    <!--<div flex="5"></div>-->
                    <!--<div flex>-->
                        <!--<md-input-container class="md-block">-->
                            <!--<label>Quantity</label>-->
                            <!--<input name="InvoiceProdQty" id="{{row.qtyId}}" ng-required="true" ng-pattern="/^-?[0-9][^\.]*$/" type="number" min="1" ng-blur="calcQty(row,$index)" ng-model="row.qty">-->
                            <!--<div ng-messages="vm.editInvoice.InvoiceProdQty.$error">-->
                                <!--<div ng-message="pattern">Quantity of Unit is invalid</div>-->
                            <!--</div>-->
                        <!--</md-input-container>-->
                    <!--</div>-->
                    <!--<div flex="5"></div>-->
                    <!--<div flex layout="row">-->
                        <!--<div flex="5" layout="column" class="billingFrqCurrency" layout-align="center start">-->
                            <!--{{0| isoCurrency: BaseCurrency:0}}-->
                        <!--</div>-->
                        <!--<md-input-container class="md-block" flex-gt-sm>-->
                            <!--<label>Amount</label>-->
                            <!--<input disabled type="" ng-model="row.rowAmtDisplay">-->
                        <!--</md-input-container>-->
                    <!--</div>-->

                    <!--<div layout="column" layout-align="center center">-->
                        <!--<md-button ng-click="removerow($index);" class="md-icon-button md-warn"><md-icon md-font-icon="icon-close-circle"></md-icon><md-tooltip>Remove row</md-tooltip> </md-button>-->
                    <!--</div>-->

                <!--</div>-->
            </div>

            <div layout="row" layout-align="end center">
                <md-button ng-click="addrow($event)" class="md-icon-button add-row-ico mr-10" layout="row">
                    <md-icon md-font-icon="icon-plus-circle md-accent"></md-icon>
                    <md-tooltip>Add another row</md-tooltip>
                </md-button>
            </div>
            <div layout="row" class="p-5">
                <div flex="70"></div>
                <div layout="row" layout-align="start center" flex="30">
                    <div flex="5" layout="column" class="billingFrqCurrency pb-20" layout-align="center start">
                        {{0| isoCurrency: BaseCurrency:0}}
                    </div>
                    <md-input-container flex>
                        <label>Discount</label>
                        <input ng-required="false" type="number" name="discount" min="1" max="100000000000000000" ng-model="vm.editInvoice.discount" style="text-align: right">
                        <div ng-messages="vm.editInvoice.discount.$error">
                            <div ng-message="max">Discount must be between 1-18 digits</div>
                            <div ng-message="min">Discount must be between 1-18 digits</div>
                        </div>
                    </md-input-container>
                </div>
                <div class="w-55"></div>
            </div>
            <div>
                <div layout="row" class="p-5">
                    <div flex></div>
                    <div layout="column" class="solid-highlight-gray p-10" flex="30">
                        <div layout="row" layout-align="start center" fill-width>
                            <div flex="5" layout="column" class="billingFrqCurrency pb-20" layout-align="center start">
                                {{0| isoCurrency: BaseCurrency:0}}
                            </div>
                            <md-input-container flex>
                                <label>Miscellaneous charges</label>
                                <input type="number" ng-required="false" min="0" max="100000000000000000" name="additionalcharge"  ng-model="vm.editInvoice.additionalcharge" style="text-align: right">
                                <div ng-messages="vm.editInvoice.additionalcharge.$error">
                                    <div ng-message="max">Additional Charges must be between 1-18 digits</div>
                                    <div ng-message="min">Additional Charges must be between 1-18 digits</div>
                                </div>
                            </md-input-container>
                        </div>
                        <md-input-container fill-width>
                            <label>Remarks</label>
                            <input type="text" ng-required="false" min="1" ng-maxlength="300" md-maxlength="300" name="remarks" ng-model="vm.editInvoice.remarks">
                            <div ng-messages="vm.editInvoice.remarks.$error">
                                <div ng-message="maxlength">Remarks must be between 1-300 characters</div>
                            </div>
                        </md-input-container>
                    </div>
                    <div class="w-55"></div>
                </div>
            </div>
            <div layout="row" class="p-5">
                <div flex></div>
                <div layout="row" layout-align="end center" flex="30">
                    <h2 class="font-accent">Total : {{vm.itemTotal + vm.editInvoice.additionalcharge - vm.editInvoice.discount | isoCurrency: BaseCurrency:0}}</h2>
                </div>
                <div class="w-55"></div>
            </div>
            <!--<div layout="row" style="margin-bottom: 10px">-->
                <!--<div flex="30">-->
                    <!--<md-input-container class="md-block">-->
                        <!--<label>Payment collection method</label>-->
                        <!--&lt;!&ndash;<input type="text" ng-required="true" min="1" ng-model="row.unitUom">&ndash;&gt;-->
                        <!--<md-select ng-required="true" flex ng-model="vm.editInvoice.paymentOption">-->
                            <!--<md-option value="Online">Online</md-option>-->
                            <!--<md-option value="Offline">Offline</md-option>-->
                        <!--</md-select>-->
                    <!--</md-input-container>-->
                <!--</div>-->
                <!--<div flex="5"></div>-->
            <!--</div>-->
        </md-card-content>
    </md-card>




    <!--CREATE NEW INVOICE _ CARDED=================================================-->
</form>
